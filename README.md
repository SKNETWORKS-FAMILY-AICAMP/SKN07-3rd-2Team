# SKN07-3rd-2Team
## LLMì„ ì—°ë™í•œ ë‚´ì™¸ë¶€ ë¬¸ì„œ ê¸°ë°˜ ì§ˆì˜ì‘ë‹µ ì‹œìŠ¤í…œ

---

# ğŸƒğŸƒâ€â™‚ï¸ğŸƒâ€â™€ï¸ íŒ€ëª… : ê¹€ì„±ê·¼ê³¼ ì•„ì´ë“¤
|<img src="https://github.com/pladata-encore/SKN07-3rd-2Team/blob/main/image/%E3%85%85%E3%84%B1.jpg" alt="ê¹€ì„±ê·¼" width="120"/>|<img src="https://github.com/pladata-encore/SKN07-3rd-2Team/blob/main/image/%E3%85%85%E3%85%81.jpg" alt="ìœ¤ìˆ˜ë¯¼" width="120"/>|<img src="https://github.com/pladata-encore/SKN07-3rd-2Team/blob/main/image/%E3%85%88%E3%85%8A.jpg" alt="ì´ì¬ì² " width="120"/>|
|---|---|---|
| <div align="center">**ê¹€ì„±ê·¼**</div> | <div align="center">**ìœ¤ìˆ˜ë¯¼**</div> | <div align="center">**ì´ì¬ì² **</div> |
| <div align="center">Refactoring</div> | <div align="center">Streamlit</div> | <div align="center">RAG<br>Prompt Engineering</div> |

 ---
 
# ğŸ“œ ì œí’ˆ ì‚¬ìš© ì„¤ëª…ì„œ ì§ˆì˜ì‘ë‹µ ì±—ë´‡
## ğŸ”– í”„ë¡œì íŠ¸ ì†Œê°œ
ì´ í”„ë¡œì íŠ¸ëŠ” LLM(Large Language Model)ê³¼ RAG(Retrieval-Augmented Generation) ë°©ì‹ì„ í™œìš©í•˜ì—¬ ì‚¬ìš© ì„¤ëª…ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì§ˆì˜ì‘ë‹µ(Q&A) ì±—ë´‡ì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.
## ğŸ”– í”„ë¡œì íŠ¸ ë™ê¸°
- ë³µì¡í•œ ì‚¬ìš© ì„¤ëª…ì„œë¥¼ ì½ê¸° ì–´ë ¤ì›Œí•˜ëŠ” ì‚¬ìš©ìë“¤ì„ ìœ„í•´ ê°œë°œ
- í•„ìš”í•œ ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ìë™í™”ëœ Q&A ì‹œìŠ¤í…œ ì œê³µ
- ê³ ê° ì§€ì› ë¶€ë‹´ ê°ì†Œ ë° ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- ë‹¤ì–‘í•œ ì œí’ˆì— ì ìš© ê°€ëŠ¥í•œ ë²”ìš©ì ì¸ ì†”ë£¨ì…˜ êµ¬ì¶•
## ğŸ”– í”„ë¡œì íŠ¸ ëª©í‘œ
- LLMê³¼ RAG ë°©ì‹ì„ í™œìš©í•œ ì§ˆì˜ì‘ë‹µ ì±—ë´‡ êµ¬ì¶•
- ì‚¬ìš© ì„¤ëª…ì„œì—ì„œ ê´€ë ¨ ì •ë³´ ê²€ìƒ‰ ë° ìì—°ì–´ ì‘ë‹µ ìƒì„±
- ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì§ê´€ì ì¸ ì¸í„°í˜ì´ìŠ¤ ì œê³µ
- ë‹¤ì–‘í•œ ì œí’ˆ ì„¤ëª…ì„œ ì§€ì› (ê°€ì „, ì†Œí”„íŠ¸ì›¨ì–´, ìë™ì°¨ ë“±)
- ì§€ì†ì ì¸ í”¼ë“œë°±ì„ í†µí•œ ì„±ëŠ¥ ê°œì„ 

---

## ğŸ”¨ ê¸°ìˆ  ìŠ¤íƒ
<div>
<img src="https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54">
<img src="https://a11ybadges.com/badge?logo=openai" alt="OpenAI" width="163" height="28"/>
<img src="https://img.shields.io/badge/langchain-F7DF1E?style=for-the-badge&logo=langchain&logoColor=black">
<img src="https://img.shields.io/badge/streamlit%20-%23FF0000.svg?style=for-the-badge&logo=streamlit&logoColor=white">
<img src="https://github.com/pladata-encore/SKN07-3rd-2Team/blob/main/image/chromadb.jpg" alt="chromadb" width="90" height="40">
<div>
</div>
<img src="https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white">
<img src="https://img.shields.io/badge/Visual%20Studio%20Code-0078d7.svg?style=for-the-badge&logo=visual-studio-code&logoColor=white">
<img src="https://img.shields.io/badge/jupyter-%23FA0F00.svg?style=for-the-badge&logo=jupyter&logoColor=white">
<img src="https://img.shields.io/badge/Discord-%235865F2.svg?style=for-the-badge&logo=discord&logoColor=white">
</div>
 
## ğŸ“Œ ì½”ë“œ ë¦¬ë·°
### ë°ì´í„° ë¡œë“œ ë° ì „ì²˜ë¦¬ (PDF ì²˜ë¦¬ ë° ChromaDB ì €ì¥)
```python
# ë°ì´í„° ì—…ë¡œë“œ ë° í¬ë¡œë§ˆDB ì €ì¥
def init(uploaded_file):
    if uploaded_file is not None:
        # íŒŒì¼ ì €ì¥ í›„ ë¡œë“œ
        file_path = f"./temp/{uploaded_file.name}"
        os.makedirs("./temp", exist_ok=True)
        with open(file_path, "wb") as f:
            f.write(uploaded_file.getbuffer())
        
        # ë°ì´í„° ë¡œë“œ (PDF íŒŒì¼)
        loader = PyPDFLoader(file_path)
        document = loader.load()
        
        # ë°ì´í„° ë¶„í• 
        text_splitter = CharacterTextSplitter(chunk_size=1000, chunk_overlap=50)
        texts = text_splitter.split_documents(document)
        db = getDB()
        
        # Chroma DBì— ì €ì¥
        db.add_documents(texts)
        st.success("PDF íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤!")

# í…ìŠ¤íŠ¸ ì„ë² ë”©
def getDB():
    # ì €ì¥ ë° ê²€ìƒ‰
    embeddings = OpenAIEmbeddings()
    docsearch = Chroma(
        persist_directory="./db",  # ë°ì´í„°ë² ì´ìŠ¤ ê²½ë¡œ
        embedding_function=embeddings
    )
    return docsearch
```
| ![pdf_file](https://github.com/pladata-encore/SKN07-3rd-2Team/blob/main/image/pdf_10page.jpg?raw=true) | ![data_load](https://github.com/pladata-encore/SKN07-3rd-2Team/blob/main/image/data_load.jpg?raw=true) |
|:-------------------------------------:|:-------------------------------------:|

### PDF ìš”ì•½
```python
# í…ìŠ¤íŠ¸ ìš”ì•½ í•¨ìˆ˜
def summarize_document(document):
    llm = ChatOpenAI(model_name="gpt-4-0613", temperature=0)
    summary_prompt = "ë‹¤ìŒ í…ìŠ¤íŠ¸ì—ì„œ ì–´ë–¤ ì œí’ˆì— ëŒ€í•œ ì„¤ëª…ì„œì¸ì§€ ê°„ëµíˆ ìš”ì•½í•´ ì£¼ì„¸ìš”:\n\n" + document
    summary = llm.predict(summary_prompt)
    return summary
```

### RAG Chain ìƒì„±
```python
def getRagChain():
    retriever = getDB().as_retriever()
    rag_prompt = RunnableLambda(lambda x: f"""
ë‹¹ì‹ ì€ ì‚¬ìš©ì ë§¤ë‰´ì–¼ì„ ì•ˆë‚´í•˜ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì§ˆë¬¸ì— ëŒ€í•´ ëª…í™•í•˜ê³  ìì„¸í•œ ë‹µë³€ì„ ì œê³µí•˜ì„¸ìš”.

### [ì»¨í…ìŠ¤íŠ¸]
{x['context']}

### [ì§ˆë¬¸]
{x['question']}

- ì§ˆë¬¸ì— ëŒ€í•´ ì™„ì „í•œ ë¬¸ì¥ìœ¼ë¡œ ë‹µë³€, ë‹¨ë‹µí˜• ë‹µë³€ì€ ì§€ì–‘í•˜ê³ , ë¬¸ì¥ìœ¼ë¡œ ëª…í™•í•˜ê²Œ ì„¤ëª…í•  ê²ƒ.
- ì´ìƒí•˜ê±°ë‚˜ ë¬´ì˜ë¯¸í•œ ì§ˆë¬¸ ë˜ëŠ” ë§¤ë‰´ì–¼ê³¼ ì—†ëŠ” ì§ˆë¬¸ì—ëŠ” ë‹¨í˜¸í•˜ê²Œ ë‹µë³€í•˜ì§€ ë§ ê²ƒ ì˜ˆì‹œ : í•¸ë“œí° íŒŒì† ë°©ë²•, í•¸ë“œí°ìœ¼ë¡œ ë¼ë©´ ë“ì´ê¸° 
- ì•„ì´ì½˜(icon)ì— ëŒ€í•œ ì„¤ëª…ì´ í¬í•¨ëœ ê²½ìš°, ì•„ì´ì½˜ì˜ ëª¨ì–‘ê³¼ íŠ¹ì§•ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„œìˆ í•  ê²ƒ.
- ì‚¬ìš©ìê°€ ëª…í™•í•œ ë‹µë³€ì„ ì–»ì„ ìˆ˜ ìˆë„ë¡ ì¡°ë¦¬ ìˆê²Œ ì •ë¦¬í•˜ì—¬ ë‹µí•  ê²ƒ.
""")
    llm = ChatOpenAI(model_name="gpt-4o-mini", temperature=0)
    
    rag_chain = (
        {"context": retriever, "question": RunnablePassthrough()} 
        | rag_prompt 
        | llm 
    )
    return rag_chain

def generate_answer(question):
    rag_chain = getRagChain()
    answer = rag_chain.invoke(question).content
    return answer
```

 ---
 
## ğŸ“Œ ìˆ˜í–‰ê²°ê³¼(í…ŒìŠ¤íŠ¸/ì‹œì—° í˜ì´ì§€)
### êµ¬í˜„ í™”ë©´
![screen](https://github.com/pladata-encore/SKN07-3rd-2Team/blob/main/image/%EC%A0%84%EC%B2%B4%ED%99%94%EB%A9%B4.jpg?raw=true)

---
![history](https://github.com/pladata-encore/SKN07-3rd-2Team/blob/main/image/%EC%A7%88%EB%AC%B8_%EB%8B%B5%EB%B3%80_history.jpg?raw=true)

---
### ì´ìƒ ì§ˆë¬¸ ì‹œ ë‹µë³€
![weired](https://github.com/pladata-encore/SKN07-3rd-2Team/blob/main/image/%EC%9D%B4%EC%83%81%EC%A7%88%EB%AC%B8.jpg?raw=true)


---
## ğŸ“– í•œ ì¤„ íšŒê³ 
ê¹€ì„±ê·¼ : í•­ìƒ ì‹œê°„ì€ ì§§ì€ ê²ƒ ê°™ë‹¤

ìœ¤ìˆ˜ë¯¼ : ì•„ì§ ë§ì´ ë¶€ì¡±í•˜ì§€ë§Œ, í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ë§ì´ ë°°ìš¸ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. LLM ì–´ë µì§€ë§Œ ì¬ë°Œì§€ë§Œ ê°€ê¹Œì›Œì§€ê¸´ í˜ë“  ìì‹,,

ì´ì¬ì²  : íŒ€ì› ì¤‘ ì œì¼ ë¶€ì¡±í•¨ì´ ë§ì€ í”„ë¡œì íŠ¸ì˜€ìŠµë‹ˆë‹¤. ë¶€ì¡±í•œ íŒ€ì› ë„ì›€ì£¼ì‹œë©´ì„œ í•˜ì‹œëŠë¼ ê³ ìƒ ë§ìœ¼ì…¨ìŠµë‹ˆë‹¤ğŸ™‡â€â™‚ï¸
